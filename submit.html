<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Submit Event ‚Ä¢ NextUp</title>
<link rel="icon" href="favicon.ico">
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="styles.css">
</head>
<body class="bg-gray-50 text-gray-900">
<nav class="bg-white shadow">
  <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
    <a href="index.html" class="font-bold">NextUp</a>
    <a href="index.html" class="text-sm text-gray-600">Back</a>
  </div>
</nav>

<main class="max-w-3xl mx-auto p-6">
  <h1 class="text-2xl font-bold">Submit an event</h1>
  <p class="text-sm text-gray-600">
    Submissions go directly into the shared Google Sheet. 
    Make sure you published your sheet and deployed the Google Apps Script endpoint.
  </p>

  <form id="submitForm" class="mt-6 space-y-4 bg-white p-6 rounded shadow">
    <label class="block">
      <span class="text-sm font-medium">Title</span>
      <input name="title" required class="mt-1 block w-full rounded border p-2">
    </label>

    <label class="block">
      <span class="text-sm font-medium">Category</span>
      <input name="category" class="mt-1 block w-full rounded border p-2">
    </label>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <label>
        <span class="text-sm font-medium">Start</span>
        <input name="start" type="datetime-local" class="mt-1 block w-full rounded border p-2">
      </label>
      <label>
        <span class="text-sm font-medium">End</span>
        <input name="end" type="datetime-local" class="mt-1 block w-full rounded border p-2">
      </label>
    </div>

    <label class="block">
      <span class="text-sm font-medium">Location</span>
      <input name="location" class="mt-1 block w-full rounded border p-2">
    </label>

    <label class="block">
      <span class="text-sm font-medium">Image URL</span>
      <input name="image" class="mt-1 block w-full rounded border p-2">
    </label>

    <label class="block">
      <span class="text-sm font-medium">Price (or 'Free')</span>
      <input name="price" class="mt-1 block w-full rounded border p-2">
    </label>

    <label class="block">
      <span class="text-sm font-medium">Description</span>
      <textarea name="description" rows="6" class="mt-1 block w-full rounded border p-2"></textarea>
    </label>

    <label class="block">
      <span class="text-sm font-medium">Organizer</span>
      <input name="organizer" class="mt-1 block w-full rounded border p-2">
    </label>

    <label class="block">
      <span class="text-sm font-medium">Ticket URL</span>
      <input name="ticketUrl" class="mt-1 block w-full rounded border p-2">
    </label>

    <div class="flex justify-end gap-2">
      <a href="index.html" class="px-4 py-2 rounded border">Cancel</a>
      <button type="submit" class="px-4 py-2 rounded bg-purple-600 text-white">Submit</button>
    </div>
  </form>

  <div id="result" class="mt-4"></div>
</main>

<footer class="bg-gray-900 text-gray-300 py-6 text-center">&copy; 2025 NextUp</footer>

<script>
// üîπ Paste your Google Apps Script Web App URL here:
const FORM_ENDPOINT = https://script.google.com/macros/s/AKfycbxU5gyJJPQp71UpX6EGjCX8z-cV2GVWcjid-xV5LW7c3lnSQ1ullgD7oIC1Ft38aiBZJA/exec;

document.getElementById('submitForm').addEventListener('submit', async (e)=>{
  e.preventDefault();
  const obj = Object.fromEntries(new FormData(e.target).entries());
  obj.id = 'sub_' + Date.now();

  try {
    const res = await fetch(FORM_ENDPOINT, {
      method: 'POST',
      body: JSON.stringify(obj),
      headers: { 'Content-Type': 'application/json' }
    });
    const result = await res.json();
    document.getElementById('result').innerHTML = 
      '<div class="p-3 rounded bg-green-50 text-green-800">‚úÖ Submitted successfully to Google Sheet!</div>';
    e.target.reset();
  } catch (err) {
    console.error(err);
    document.getElementById('result').innerHTML =
      '<div class="p-3 rounded bg-red-50 text-red-800">‚ùå Error submitting. Check console / Web App URL.</div>';
  }
});
</script>
</body>
</html>
